{% extends "base.html" %}

{% block title %}Paramètres{% endblock %}
{% block title_header %}⚙️ Paramètres{% endblock %}

{% block content %}

<h2>Paramètres généraux</h2>

<!-- FORMULAIRE COLLECTEUR -->
<form method="post">
    <input type="hidden" name="form_name" value="collector">

    <div class="card" style="margin-bottom: 1.5rem;">
        <h3>Collecte historique des miners</h3>

        <div class="form-group">
            <label>
                <input type="checkbox" name="collector_enabled"
                       {% if collector_enabled %}checked{% endif %}>
                Activer la collecte automatique des stats (historique)
            </label>
        </div>

        <div class="form-group">
            <label for="collector_interval_minutes">
                Intervalle de collecte (en minutes)
            </label>
            <input type="number"
                   id="collector_interval_minutes"
                   name="collector_interval_minutes"
                   class="input-text"
                   min="1" max="1440"
                   value="{{ collector_interval_minutes }}">
            <p class="muted">
                Exemple : 15 = une mesure toutes les 15 minutes, basée sur le hashrate 15m.
            </p>
        </div>

        <button type="submit" class="btn btn-primary">
            Enregistrer la collecte
        </button>
    </div>
</form>


<!-- FORMULAIRE MOT DE PASSE -->
<form method="post">
    <input type="hidden" name="form_name" value="password">

    <div class="card">
        <h3>Mot de passe administrateur</h3>

        <div class="form-group">
            <label for="current_password">Mot de passe actuel</label>
            <input type="password"
                   id="current_password"
                   name="current_password"
                   class="input-text"
                   required>
        </div>

        <div class="form-group">
            <label for="new_password">Nouveau mot de passe</label>
            <input type="password"
                   id="new_password"
                   name="new_password"
                   class="input-text"
                   required>
        </div>

        <div class="form-group">
            <label for="confirm_password">Confirmer le nouveau mot de passe</label>
            <input type="password"
                   id="confirm_password"
                   name="confirm_password"
                   class="input-text"
                   required>
        </div>

        <p class="muted">
            Le nouveau mot de passe doit faire au moins 8 caractères.
        </p>

        <button type="submit" class="btn btn-primary">
            Mettre à jour le mot de passe
        </button>
    </div>
</form>

{% endblock %}
